{"version":3,"sources":["../src/index.ts","../src/models/upload-spec.ts","../src/models/api-element.ts","../src/models/download-spec.ts","../src/utils/id-or-path.ts","../src/models/item.ts","../src/http/index.ts","../src/models/search-results.ts","../src/sharefile-client-api.ts"],"sourcesContent":["import ShareFileAPI from  \"./sharefile-client-api\"\r\nexport default ShareFileAPI\r\nexport {ShareFileAPI}\r\n","\"use strict\";\r\n/**\r\n * @memberof ShareFile.Api.Models.UploadSpecification\r\n * @link https://api.sharefile.com/docs/resource?name=ShareFile.Api.Models.UploadSpecification\r\n */\r\n//@ts-expect-error - no declaration\r\nimport detectContentType from \"detect-content-type\";\r\nimport SharefileClientAPIElement from \"./api-element\";\r\nimport SharefileHTTP from \"../http/index\";\r\nimport ShareFileAPI from \"../sharefile-client-api\";\r\n\r\ninterface HTTPResponse_UploadSpecification {\r\n  Method                   : string\r\n  ChunkUri                 : string\r\n  ProgressData             : string\r\n  IsResume                 : boolean\r\n  ResumeIndex              : number\r\n  ResumeOffset             : number\r\n  ResumeFileHash           : string\r\n  MaxNumberOfThreads       : number\r\n  CanAcceptParamsInHeaders : boolean\r\n}\r\n\r\nclass UploadSpecification extends SharefileClientAPIElement {\r\n  readonly Method                  : string;\r\n  readonly ChunkUri                : string;\r\n  readonly ProgressData            : string;\r\n  readonly IsResume                : boolean;\r\n  readonly ResumeIndex             : number;\r\n  readonly ResumeOffset            : number;\r\n  readonly ResumeFileHash          : string;\r\n  readonly MaxNumberOfThreads      : number;\r\n  readonly CanAcceptParamsInHeaders: boolean;\r\n\r\n  constructor(\r\n    values: HTTPResponse_UploadSpecification,\r\n    http: SharefileHTTP,\r\n    api: ShareFileAPI\r\n  ) {\r\n    super(http, api)\r\n    this.Method                   = values.Method;\r\n    this.ChunkUri                 = values.ChunkUri;\r\n    this.ProgressData             = values.ProgressData;\r\n    this.IsResume                 = values.IsResume;\r\n    this.ResumeIndex              = values.ResumeIndex;\r\n    this.ResumeOffset             = values.ResumeOffset;\r\n    this.ResumeFileHash           = values.ResumeFileHash;\r\n    this.MaxNumberOfThreads       = values.MaxNumberOfThreads;\r\n    this.CanAcceptParamsInHeaders = values.CanAcceptParamsInHeaders;\r\n  }\r\n\r\n  /**\r\n   * Uploads the contents to the specified ChunkUri.\r\n   * @param {String|Buffer} contents - The content to upload.\r\n   * @return {Promise<string>} A promise that resolves with the upload response.\r\n   * @memberof UploadSpecification\r\n   */\r\n  async upload(contents: string | Buffer): Promise<string> {\r\n    if (!Buffer.isBuffer(contents)) {\r\n      contents = Buffer.from(contents);\r\n    }\r\n\r\n    const headers = {\r\n      \"Content-Type\": detectContentType(contents),\r\n      \"Content-Length\": contents.length.toString(),\r\n    };\r\n\r\n    try {\r\n      const response = await fetch(this.ChunkUri, {\r\n        method: \"POST\",\r\n        headers: headers,\r\n        body: contents,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      return await response.text();\r\n    } catch (error) {\r\n      console.error(\"Upload failed:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\nexport default UploadSpecification;","/**\r\n * Base class for most Sharefile elements\r\n * \r\n */\r\n\r\nimport SharefileHTTP from \"../http/index\";\r\nimport ShareFileAPI from \"../sharefile-client-api\";\r\n\r\nexport default class SharefileClientAPIElement {\r\n  protected _http: SharefileHTTP;\r\n  protected _api: ShareFileAPI;\r\n  'odata.metadata':string\r\n  'odata.type':string\r\n  'url'?:string\r\n\r\n  constructor(http:SharefileHTTP,api:ShareFileAPI){\r\n    this._http = http\r\n    this._api = api\r\n  }\r\n}","import { ShareFileResponse } from '../types/sharefileresponse'\r\nimport SharefileClientAPIElement from \"./api-element\";\r\nimport SharefileHTTP from \"../http/index\";\r\nimport ShareFileAPI from \"../sharefile-client-api\";\r\n\r\nexport interface HttpResponse_DownloadSpecification {\r\n    DownloadToken: string\r\n    DownloadUrl: string\r\n    DownloadPrepStatusURL: string\r\n    \"odata.metadata\": string\r\n    \"odata.type\": string\r\n}\r\n\r\n/**\r\n *  ````\r\n *  const downloadSpec = new DownloadSpecification(response, http, api);\r\n *\r\n *  // Download as Buffer (default)\r\n *  const buffer = await downloadSpec.download().toBuffer();\r\n *\r\n *  // Download as Stream\r\n *  const stream = await downloadSpec.download().toStream();\r\n *\r\n *  // Wait and then download as Buffer\r\n *  const buffer = await downloadSpec.waitAndDownload().then(chain => chain.toBuffer());\r\n *\r\n *  // Wait and then download as Stream\r\n *  const stream = await downloadSpec.waitAndDownload().then(chain => chain.toStream());\r\n * ````\r\n * \r\n * @memberof ShareFile.Api.Models.DownloadSpecification\r\n * @link https://api.sharefile.com/docs/resource?name=ShareFile.Api.Models.DownloadSpecification\r\n */\r\nexport default class DownloadSpecification extends SharefileClientAPIElement {\r\n    readonly token: string = \"\";\r\n    readonly url: string = \"\";\r\n    readonly prepStatus: string = \"\";\r\n    readonly odata: ShareFileResponse.OData = {\r\n        metadata: \"\",\r\n        type: \"\"\r\n    };\r\n\r\n    constructor(x: HttpResponse_DownloadSpecification, http: SharefileHTTP, api: ShareFileAPI) {\r\n        super(http, api)\r\n        this.token = x.DownloadToken;\r\n        this.url = x.DownloadUrl;\r\n        this.prepStatus = x.DownloadPrepStatusURL;\r\n        this.odata = {\r\n            metadata: x[\"odata.metadata\"],\r\n            type: x[\"odata.type\"]\r\n        };\r\n    }\r\n\r\n    async checkStatus(): Promise<boolean> {\r\n        if (!this.prepStatus) return true;\r\n        try {\r\n            return await this._http.get(this.prepStatus);\r\n        } catch (error) {\r\n            console.error('Error checking download status:', error);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    download(): DownloadChain {\r\n        return new DownloadChain(this.url, this.token);\r\n    }\r\n\r\n    async waitAndDownload(maxAttempts: number = 10, interval: number = 2000): Promise<DownloadChain> {\r\n        for (let i = 0; i < maxAttempts; i++) {\r\n            if (await this.checkStatus()) {\r\n                return this.download();\r\n            }\r\n            await new Promise(resolve => setTimeout(resolve, interval));\r\n        }\r\n        throw new Error('Download preparation timed out');\r\n    }\r\n}\r\n\r\nclass DownloadChain {\r\n    private url: string;\r\n    private token: string;\r\n\r\n    constructor(url: string, token: string) {\r\n        this.url = url;\r\n        this.token = token;\r\n    }\r\n\r\n    private async makeRequest(): Promise<Response> {\r\n        const response = await fetch(this.url, {\r\n            headers: { 'Authorization': `Bearer ${this.token}` }\r\n        });\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`HTTP Error: ${response.status}`);\r\n        }\r\n\r\n        return response;\r\n    }\r\n\r\n    async toBuffer(): Promise<Buffer> {\r\n        const response = await this.makeRequest();\r\n        return await response.arrayBuffer().then(res=>Buffer.from(res));\r\n    }\r\n\r\n    async toStream(): Promise<ReadableStream> {\r\n        const response = await this.makeRequest();\r\n        return response.body!;\r\n    }\r\n}","export default function idOrPath(str:string){\r\n  return str.split('-').length===5?'id':'path';\r\n}","/**\r\n * @memberof ShareFile.Api.Models.Item\r\n * @link https://api.sharefile.com/docs/resource?name=ShareFile.Api.Models.Item\r\n */\r\nimport { ShareFileAPIModels } from '../types/sharefile.api.models'\r\nimport SharefileHTTP from '../http/index'\r\nimport UploadSpecification from './upload-spec'\r\nimport DownloadSpecification from './download-spec'\r\nimport { SharefileNodeAPI } from '../types/sharefile-client-api'\r\nimport idOrPath from '../utils/id-or-path'\r\nimport ShareFileAPI from '../sharefile-client-api'\r\nimport type { HttpResponse_DownloadSpecification } from './download-spec'\r\nimport SharefileClientAPIElement from './api-element'\r\n\r\nexport default class SharefileItem extends SharefileClientAPIElement {\r\n  \r\n  /**\r\n   * Item Unique ID.\r\n   * @type {string}\r\n   */\r\n  readonly id: string;\r\n\r\n  /**\r\n   * Item Name.\r\n   * @type {string}\r\n   */\r\n  readonly Name: string;\r\n\r\n  readonly Hash: string;\r\n\r\n  /**\r\n   * Item File Name. ShareFile allows Items to have different Display and File names:\r\n   * display names are shown during client navigation, while file names are used when the item is downloaded.\r\n   * @type {string}\r\n   */\r\n  readonly FileName: string;\r\n\r\n  /**\r\n   * User that Created this Item.\r\n   */\r\n  readonly Creator?: ShareFileAPIModels.User;\r\n\r\n  /**\r\n   * Parent container of the Item. A container is usually a Folder object, with a few exceptions - the \"Account\" is the container of top-level folders.\r\n   */\r\n  readonly Parent: {Id:string};\r\n\r\n  /**\r\n   * List of Access Controls for this Item. This is not the effective ACL on the Item, just the ACLs directly attached to this Item. Use the \"Info\" reference to retrieve effective ACL.\r\n   */\r\n  readonly AccessControls?: ShareFileAPIModels.AccessControl[];\r\n\r\n  /**\r\n   * The Storage Zone that contains this Item.\r\n   */\r\n  readonly Zone?: ShareFileAPIModels.Zone;\r\n\r\n  /**\r\n   * Item Creation Date.\r\n   */\r\n  readonly CreationDate: Date;\r\n\r\n  /**\r\n   * The last modified date of this item and all of its children, recursively.\r\n   * This parameter is not supported in all ShareFile providers - it is always set in sharefile.com hosting, but not in some StorageZone connectors. The Capability object of the provider indicates whether the provider supports this field or not.\r\n   */\r\n  readonly ProgenyEditDate: Date;\r\n\r\n  /**\r\n   * Client device filesystem Created Date of this Item.\r\n   */\r\n  readonly ClientCreatedDate?: Date;\r\n\r\n  /**\r\n   * Client device filesystem last Modified Date of this Item.\r\n   */\r\n  readonly ClientModifiedDate?: Date;\r\n\r\n  /**\r\n   * Defines the Retention Policy for this Item. After this date, the item is automatically moved to recycle bin.\r\n   */\r\n  readonly ExpirationDate: Date;\r\n\r\n  /**\r\n   * Item description.\r\n   */\r\n  readonly Description: string;\r\n\r\n  /**\r\n   * Disk space limit for the Item. Define the maximum amount of bytes that this container can hold at any given time.\r\n   */\r\n  readonly DiskSpaceLimit: number;\r\n\r\n  /**\r\n   * Defines whether the Item has a 'hidden' flag.\r\n   */\r\n  readonly IsHidden: boolean;\r\n\r\n  /**\r\n   * Bandwidth limit for the Item. Define the maximum amount of bytes that can be added and retrieved from this item.\r\n   */\r\n  readonly BandwidthLimitInMB: number;\r\n\r\n  /**\r\n   * User Owner of this Item.\r\n   */\r\n  readonly Owner?: ShareFileAPIModels.User;\r\n\r\n  /**\r\n   * ShareFile Account containing this item.\r\n   */\r\n  readonly Account?: ShareFileAPIModels.Account;\r\n\r\n  /**\r\n   * Item size in Kilobytes. For containers, this field includes all children sizes, recursively.\r\n   */\r\n  readonly FileSizeInKB: number;\r\n\r\n  /**\r\n   * Contains an ItemID path, separated by /, from the virtual root to this given file. Example /accountID/folderID/folderID/itemID.\r\n   */\r\n  readonly Path: string;\r\n\r\n  /**\r\n   * First name of the user that created this item.\r\n   */\r\n  readonly CreatorFirstName: string;\r\n\r\n  /**\r\n   * Last name of the user that created this item.\r\n   */\r\n  readonly CreatorLastName: string;\r\n\r\n  /**\r\n   * Amount of days until this item expires (see ExpirationDate).\r\n   */\r\n  readonly ExpirationDays: number;\r\n\r\n  /**\r\n   * Item size in bytes. For containers, this field will include all children sizes, recursively.\r\n   */\r\n  readonly FileSizeBytes: number;\r\n\r\n  /**\r\n   * Indicates whether a preview image is available for this Item. ShareFile.com always creates previews for known file types, although there is a delay from the file creation until the preview is available. Some Storage Zones Providers do not create previews, depending on version and deployment options. Previews are not created for unknown file types.\r\n   */\r\n  readonly PreviewStatus?: any;\r\n\r\n  /**\r\n   * Indicates a list of PreviewPlatforms supported for this item.\r\n   */\r\n  readonly PreviewPlatformsSupported?: any;\r\n\r\n  /**\r\n   * Indicates a list of EditingPlatforms supported for this item.\r\n   */\r\n  readonly EditingPlatformsSupported: any;\r\n\r\n  /**\r\n   * Indicates that the Item is pending for removal. At the next execution of the Cleanup process, the data blob associated with this item will be removed. This parameter is not used for certain Storage Zone Providers. For example, in CIFS and SharePoint connectors, removals are performed immediately. The Capability \"HasRecycleBin\" indicates whether this field is used or not in the provider.\r\n   */\r\n  readonly HasPendingDeletion: boolean;\r\n\r\n  /**\r\n   * Folder Template reference. If set, it indicates that this Item was created from a Folder Template. Modifications to the folder template are propagated to the associated items. The Capability FolderTemplate indicates whether the provider supports Folder Templates.\r\n   */\r\n  readonly AssociatedFolderTemplateID: string;\r\n\r\n  /**\r\n   * Indicates whether the item is owned by a Folder Template. If set, it indicates that this Item was created from a Folder Template. Modifications to the folder template are propagated to the associated items. The Capability FolderTemplate indicates whether the provider supports Folder Templates.\r\n   */\r\n  readonly IsTemplateOwned: boolean;\r\n\r\n  /**\r\n   * Identifier for the Item stream. An Item represents a single version of a file system object. The stream identifies all versions of the same file system object. For example, when users upload or modify an existing file, a new Item is created with the same StreamID. All Item enumerations return only the latest version of a given stream. You can access the previous versions of a file using the StreamID reference.\r\n   */\r\n  readonly StreamID: string;\r\n\r\n  /**\r\n   * Short version of the item's creator's name. E.g., J. Doe.\r\n   */\r\n  readonly CreatorNameShort: string;\r\n\r\n  /**\r\n   * Specifies whether there are other versions of this item. Not all providers support file versioning. The Capability FileVersioning indicates whether the provider supports file versions.\r\n   */\r\n  readonly HasMultipleVersions: boolean;\r\n\r\n  /**\r\n   * Specifies whether or not an Item has a pending async operation.\r\n   */\r\n  readonly HasPendingAsyncOp: boolean;\r\n\r\n  /**\r\n   * Bitmask of operations allowed on a given Item. More granular (and often accurate, as it takes into account capabilities, account settings, file lock status, etc.) than what's on ItemInfo object.\r\n   */\r\n  readonly ItemOperations?: any;\r\n\r\n  /**\r\n   * List of custom metadata objects associated with this item.\r\n   */\r\n  readonly Metadata?: any;\r\n\r\n  /**\r\n   * List of external statuses associated with this Item.\r\n   */\r\n  readonly Statuses?: any;\r\n\r\n  /**\r\n   * Favorite item object associated with the item.\r\n   */\r\n  readonly Favorite?: any;\r\n\r\n  /**\r\n   * Item Path using Folder names.\r\n   */\r\n  readonly SemanticPath?: string;\r\n\r\n  url: string;\r\n\r\n  /**\r\n   * Creates an instance of SharefileItem.\r\n   * @param {ShareFileAPIModels.Item} body - The response body from ShareFile API representing an Item.\r\n   * @param {SharefileHTTP} http - SharefileHTTP instance used for making HTTP requests.\r\n   * @param {ShareFileAPI} api - ShareFileAPI instance for additional operations.\r\n   */\r\n  constructor(body: ShareFileAPIModels.Item, http:SharefileHTTP, api:ShareFileAPI) {\r\n      super(http,api)\r\n\r\n      this.id                         = body.Id\r\n      this.Name                       = body.Name\r\n      this.Hash                       = body.Hash\r\n      this.FileName                   = body.FileName\r\n      this.Creator                    = body.Creator\r\n      this.Parent                     = body.Parent\r\n      this.AccessControls             = body.AccessControls\r\n      this.Zone                       = body.Zone\r\n      this.CreationDate               = body.CreationDate\r\n      this.ProgenyEditDate            = body.ProgenyEditDate\r\n      this.ClientCreatedDate          = body.ClientCreatedDate\r\n      this.ClientModifiedDate         = body.ClientModifiedDate\r\n      this.ExpirationDate             = body.ExpirationDate\r\n      this.Description                = body.Description\r\n      this.DiskSpaceLimit             = body.DiskSpaceLimit\r\n      this.IsHidden                   = body.IsHidden\r\n      this.BandwidthLimitInMB         = body.BandwidthLimitInMB\r\n      this.Owner                      = body.Owner\r\n      this.Account                    = body.Account\r\n      this.FileSizeInKB               = body.FileSizeInKB\r\n      this.Path                       = body.Path\r\n      this.CreatorFirstName           = body.CreatorFirstName\r\n      this.CreatorLastName            = body.CreatorLastName\r\n      this.ExpirationDays             = body.ExpirationDays\r\n      this.FileSizeBytes              = body.FileSizeBytes\r\n      this.HasPendingDeletion         = body.HasPendingDeletion\r\n      this.AssociatedFolderTemplateID = body.AssociatedFolderTemplateID\r\n      this.IsTemplateOwned            = body.IsTemplateOwned\r\n      this.StreamID                   = body.StreamID\r\n      this.CreatorNameShort           = body.CreatorNameShort\r\n      this.HasMultipleVersions        = body.HasMultipleVersions\r\n      this.HasPendingAsyncOp          = body.HasPendingAsyncOp\r\n      this.Metadata                   = body.Metadata\r\n      this.Favorite                   = body.Favorite\r\n      this.SemanticPath               = body.SemanticPath\r\n\r\n      this.url = `Items(${this.id})/`\r\n\r\n  }\r\n\r\n \r\n  /**\r\n   * Downloads the item and returns a download link.\r\n   * @param redirect - Whether to redirect to the download link.\r\n   * @param includeAllVersions - For folder downloads, includes old versions of files when true.\r\n   * @param includeDeleted - Include archived items if true (for FINRA or other archive-enabled accounts).\r\n   */\r\n  download(redirect: true, includeAllVersions?: boolean, includeDeleted?: boolean): Promise<string>;\r\n\r\n  /**\r\n   * Downloads the item and returns a DownloadSpecification.\r\n   * @param redirect - Whether to redirect to the download link.\r\n   * @param includeAllVersions - For folder downloads, includes old versions of files when true.\r\n   * @param includeDeleted - Include archived items if true (for FINRA or other archive-enabled accounts).\r\n   */\r\n  download(redirect: false, includeAllVersions?: boolean, includeDeleted?: boolean): Promise<DownloadSpecification>;\r\n\r\n  /**\r\n   * Downloads the item.\r\n   * @param redirect - Whether to redirect to the download link.\r\n   * @param includeAllVersions - For folder downloads, includes old versions of files when true.\r\n   * @param includeDeleted - Include archived items if true (for FINRA or other archive-enabled accounts).\r\n   */\r\n  async download(\r\n    redirect: boolean,\r\n    includeAllVersions = false,\r\n    includeDeleted = false\r\n  ): Promise<string | DownloadSpecification> {\r\n    const res = await this._http.get<string | HttpResponse_DownloadSpecification>(`${this.url}Download`, {\r\n      redirect,\r\n      includeAllVersions,\r\n      includeDeleted\r\n    });\r\n\r\n    if (redirect) {\r\n      return res as string;\r\n    } else {\r\n      return new DownloadSpecification(res as HttpResponse_DownloadSpecification,this._http,this._api);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Creates a new folder as a child of the current item.\r\n   * @param folderName The name of the new folder\r\n   * @param description Optional description for the new folder\r\n   * @param overwrite If true, overwrites an existing folder with the same name\r\n   * @returns A Promise that resolves to the newly created SharefileItem\r\n   */\r\n  async createFolder(folderName: string, description?: string, overwrite: boolean = false): Promise<SharefileItem> {\r\n    const folderData = {\r\n      Name: folderName,\r\n      Description: description\r\n    };\r\n\r\n    const data = await this._http.post<ShareFileAPIModels.Item>(`${this.url}Folder`, folderData, { overwrite });\r\n    return new SharefileItem(data, this._http, this._api);\r\n  }\r\n\r\n  /**\r\n   * Updates an Item object. Please note that for a Folder, the Name and FileName properties must be consistent. \r\n   * If a new Name is provided, the FileName will also be updated with the new name, and viceversa. \r\n   * If both Name and FileName are provided, FileName is disregarded and Name will be used to update both properties.\r\n   * \r\n   * Note: the parameters listed in the body of the request are the only parameters that can be updated through this call.\r\n   * @param {SharefileNodeAPI.Items.UpdateItemOps_Body} ops - The properties to update.\r\n   * @returns {Promise<SharefileItem>} The updated SharefileItem.\r\n   */\r\n  async updateItem(ops: SharefileNodeAPI.Items.UpdateItemOps_Body): Promise<SharefileItem> {\r\n    const item = await this._http.patch<ShareFileAPIModels.Item>(this.url, ops);\r\n    Object.assign(this, item);\r\n    return this;\r\n  }\r\n\r\n   /**\r\n   * Renames the item.\r\n   * @param {string} newValue - The new name for the item.\r\n   * @returns {Promise<SharefileItem>} The updated SharefileItem.\r\n   */\r\n   async rename(newValue: string): Promise<SharefileItem> {\r\n    return this.updateItem({ Name: newValue });\r\n  }\r\n\r\n/**\r\n * Moves an item to a new parent\r\n *\r\n * @param {string} parentIdorPath\r\n * - If a path, makes an extra call to determine the ID of the parent before performing the move.\r\n * @memberof SharefileItem\r\n */\r\nasync move(parentIdorPath:string){\r\n  let parentId = parentIdorPath;\r\n  if(idOrPath(parentIdorPath)==='path'){\r\n    parentId = await this._api.getItem(parentIdorPath).then(({id})=>id)\r\n  }\r\n  return this.updateItem({Parent:{Id:parentId}})\r\n}\r\n\r\n  /** DEPRECATED use getParent() */\r\n  async parent(){\r\n    console.warn('[DEPRECATION NOTICE] This will be removed in the next version, please use \"getParent()\"')\r\n    return this.getParent()\r\n  }\r\n\r\n  /**\r\n   * Gets the parent of this item.\r\n   * @returns {Promise<SharefileItem>} The parent SharefileItem.\r\n   */\r\n  async getParent(): Promise<SharefileItem> {\r\n    const parent = await this._http.get<ShareFileAPIModels.Item>(`${this.url}Parent`);\r\n    return new SharefileItem(parent, this._http, this._api);\r\n  }\r\n\r\n  /**\r\n   * Gets the children of this item (if it's a folder).\r\n   * @param {boolean} [includeDeleted=false] - Whether to include deleted items.\r\n   * @returns {Promise<SharefileItem[]>} An array of child SharefileItems.\r\n   */\r\n  async children(includeDeleted = false): Promise<SharefileItem[]> {\r\n    const { value } = await this._http.get<{ value: ShareFileAPIModels.Item[] }>(`${this.url}Children`, { includeDeleted });\r\n    return value.map(item => new SharefileItem(item, this._http, this._api));\r\n  }\r\n  \r\n\r\n   /**\r\n   * Gets the first child that matches the given property and value.\r\n   * @param {keyof SharefileItem} propName - The property name to match.\r\n   * @param {any} propVal - The value to match.\r\n   * @param {boolean} [includeDeleted=false] - Whether to include deleted items in the search.\r\n   * @returns {Promise<SharefileItem | undefined>} The matching SharefileItem, if found.\r\n   */\r\n   async childBy(propName: keyof SharefileItem, propVal: any, includeDeleted = false): Promise<SharefileItem | undefined> {\r\n    const children = await this.children(includeDeleted);\r\n    return children.find(item => item[propName] === propVal);\r\n  }\r\n\r\n  /**\r\n   * Uploads a file to this item (if it's a folder).\r\n   * @param {string | Buffer} contents - The file contents to upload.\r\n   * @param {string} filename - The name for the uploaded file.\r\n   * @returns {Promise<SharefileItem | undefined>} The newly created SharefileItem, if successful.\r\n   */\r\n  async upload(contents: string | Buffer, filename: string): Promise<SharefileItem | undefined> {\r\n    const ops = {\r\n      Method: \"standard\",\r\n      Raw: true,\r\n      FileName: filename\r\n    };\r\n    const uploadSpec = await this._http.post<UploadSpecification>(`${this.url}Upload2`, ops).then(res=>new UploadSpecification(res,this._http,this._api));\r\n    await uploadSpec.upload(contents);\r\n    return this.childBy('FileName', filename);\r\n  }\r\n\r\n\r\n  \r\n  /**\r\n   * Retrieves the versions of a given Stream.\r\n   * @param includeDeleted Specifies whether or not expired items should be included in the feed\r\n   * @returns A Promise that resolves to the stream versions\r\n   */\r\n  async getStream(includeDeleted: boolean = false): Promise<ShareFileAPIModels.Item[]> {\r\n    return this._http.get<ShareFileAPIModels.Item[]>(`${this.url}Stream`, { includeDeleted })\r\n      .then((res) => res);\r\n  }\r\n\r\n  /**\r\n   * Removes the item\r\n   * @param singleversion True will delete only the specified version rather than all sibling files with the same filename\r\n   * @param forceSync True will block the operation from taking place asynchronously\r\n   * @returns A Promise that resolves when the item is deleted\r\n   */\r\n  async delete(singleversion: boolean = false, forceSync: boolean = false): Promise<true> {\r\n    return this._http.delete(this.url, { singleversion, forceSync }).then(res=>true);\r\n  }\r\n\r\n  // /**\r\n  //  * Copies the item to a new target Folder.\r\n  //  * @param targetId Target item identifier\r\n  //  * @param overwrite Indicates whether existing item in the target folder should be overwritten or not in case of name conflict\r\n  //  * @returns A Promise that resolves to the modified source object\r\n  //  */\r\n  // async copy(targetId: string, overwrite: boolean = false): Promise<SharefileItem> {\r\n  //   const data = await this._http.post(`${this.url}Copy`, { targetid: targetId, overwrite });\r\n  //   return new SharefileItem(data, this._http, this._api);\r\n  // }\r\n\r\n  /**\r\n   * Unlocks a locked file. This operation is only implemented in Sharepoint providers (/sp)\r\n   * @param message Optional message for the check-in\r\n   * @returns A Promise that resolves when the file is unlocked\r\n   */\r\n  async unlock(message?: string): Promise<void> {\r\n    return this._http.post(`${this.url}CheckIn`, { message });\r\n  }\r\n\r\n  /**\r\n   * Locks a file. This operation is only implemented in Sharepoint providers (/sp)\r\n   * @returns A Promise that resolves when the file is locked\r\n   */\r\n  async lock(): Promise<void> {\r\n    return this._http.post(`${this.url}CheckOut`);\r\n  }\r\n\r\n  /**\r\n   * Discards the existing lock on the file. This operation is only implemented in Sharepoint providers (/sp)\r\n   * @returns A Promise that resolves when the lock is discarded\r\n   */\r\n  async discardCheckOut(): Promise<void> {\r\n    return this._http.post(`${this.url}DiscardCheckOut`);\r\n  }\r\n}","import { ShareFileResponse } from \"../types/sharefileresponse\";\r\n\r\nexport interface SharefileApiAuth {\r\n  subdomain: string;\r\n  username: string;\r\n  password: string;\r\n  clientId: string;\r\n  clientSecret: string;\r\n}\r\n\r\nexport default class SharefileHTTP {\r\n  private auth: SharefileApiAuth;\r\n  private access_token: string;\r\n  private access_token_expires: Date;\r\n\r\n  constructor(auth: SharefileApiAuth) {\r\n    this.auth = auth;\r\n    this.access_token = \"\";\r\n    this.access_token_expires = new Date(0);\r\n  }\r\n\r\n  private get apiPath(): string {\r\n    return `https://${this.auth.subdomain}.sf-api.com/sf/v3/`;\r\n  }\r\n\r\n  private async safeJsonParse(response: Response): Promise<any> {\r\n    const text = await response.text();\r\n    if (!text) {\r\n      return null;\r\n    }\r\n    try {\r\n      return JSON.parse(text);\r\n    } catch (error) {\r\n      console.warn('Failed to parse response as JSON:', text);\r\n      return text;\r\n    }\r\n  }\r\n\r\n  private async request<T>(\r\n    path: string,\r\n    method: string,\r\n    body?: Record<string, any>,\r\n    query?: Record<string, any>\r\n  ): Promise<T> {\r\n    const url = new URL(this.apiPath + path);\r\n    if (query) {\r\n      Object.entries(query).forEach(([key, value]) => \r\n        url.searchParams.append(key, value.toString())\r\n      );\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(url.toString(), {\r\n        method,\r\n        headers: {\r\n          'Authorization': `Bearer ${await this.getToken()}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: body ? JSON.stringify(body) : undefined\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorBody = await this.safeJsonParse(response);\r\n        throw new Error(`API request failed: ${response.statusText}${errorBody ? ` - ${JSON.stringify(errorBody)}` : ''}`);\r\n      }\r\n\r\n      return await this.safeJsonParse(response) as T;\r\n    } catch (error) {\r\n      if (error instanceof Error) {\r\n        throw new Error(`API request failed: ${error.message}`);\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  get = <T>(path: string, params?: Record<string, any>): Promise<T> =>\r\n    this.request<T>(path, 'GET', undefined, params);\r\n\r\n  post = <T>(path: string, body?: Record<string, any>, params?: Record<string, any>): Promise<T> =>\r\n    this.request<T>(path, 'POST', body, params);\r\n\r\n  put = <T>(path: string, body?: Record<string, any>, params?: Record<string, any>): Promise<T> =>\r\n    this.request<T>(path, 'PUT', body, params);\r\n\r\n  patch = <T>(path: string, body?: Record<string, any>, params?: Record<string, any>): Promise<T> =>\r\n    this.request<T>(path, 'PATCH', body, params);\r\n\r\n  delete = <T>(path: string, params?: Record<string, any>): Promise<T> =>\r\n    this.request<T>(path, 'DELETE', undefined, params);\r\n\r\n  head = <T>(path: string, params?: Record<string, any>): Promise<T> =>\r\n    this.request<T>(path, 'HEAD', undefined, params);\r\n\r\n  private async getToken(): Promise<string> {\r\n    if (!this.access_token || this.isTokenExpired) {\r\n      return this.authenticate();\r\n    }\r\n    return this.access_token;\r\n  }\r\n\r\n  async authenticate(): Promise<string> {\r\n    const config = new URLSearchParams({\r\n      grant_type: 'password',\r\n      username: this.auth.username,\r\n      password: this.auth.password,\r\n      client_id: this.auth.clientId,\r\n      client_secret: this.auth.clientSecret,\r\n    });\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `https://${this.auth.subdomain}.sharefile.com/oauth/token`,\r\n        {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n          },\r\n          body: config.toString(),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errorBody = await this.safeJsonParse(response);\r\n        if(errorBody.error_description){\r\n          throw new Error(`${errorBody.error_description}`);\r\n        } else{\r\n          throw new Error(`Authentication failed: ${response.statusText}${errorBody ? ` - ${JSON.stringify(errorBody)}` : ''}`);\r\n        }\r\n      }\r\n\r\n      const data = await this.safeJsonParse(response) as ShareFileResponse.Login;\r\n\r\n      if (!data || !data.access_token) {\r\n        throw new Error('Authentication failed: Invalid response data');\r\n      }\r\n\r\n      this.access_token = data.access_token;\r\n      this.access_token_expires = new Date(Date.now() + data.expires_in * 1000);\r\n      return this.access_token;\r\n    } catch (error) {\r\n      if (error instanceof Error) {\r\n        throw new Error(`Authentication failed: ${error.message}`);\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private get isTokenExpired(): boolean {\r\n    return Date.now() >= this.access_token_expires.getTime();\r\n  }\r\n}","/**\r\n * @memberof ShareFile._api.Models.SearchResults\r\n * @link https://api.sharefile.com/docs/resource?name=ShareFile._api.Models.SearchResults\r\n */\r\n\r\nimport SharefileItem from './item';\r\nimport SharefileHTTP from '../http/index';\r\nimport ShareFileAPI from '../sharefile-client-api';\r\nimport SharefileClientAPIElement from './api-element';\r\n\r\n/**\r\n * Represents a single search result item.\r\n */\r\nexport interface ISearchResult_Reponse { \r\n  PartialResults: boolean; \r\n  Results: any[]\r\n  TimedOut: boolean;\r\n  TotalCount: number;\r\n}\r\n\r\n/**\r\n * Represents the results of a search operation in ShareFile.\r\n */\r\nexport class SharefileSearchResults extends SharefileClientAPIElement {\r\n  /**\r\n   * Indicates whether the results are partial due to limitations or timeouts.\r\n   */\r\n  readonly partialResults: boolean;\r\n\r\n  /**\r\n   * The collection of search result items.\r\n   */\r\n  readonly results: any[];\r\n\r\n  /**\r\n   * Indicates whether the search query timed out.\r\n   */\r\n  readonly timedOut: boolean;\r\n\r\n  /**\r\n   * The total number of results found.\r\n   */\r\n  readonly totalCount: number;\r\n\r\n  /**\r\n   * Creates a new instance of SharefileSearchResults.\r\n   * \r\n   * @param {Object} data - The raw search results data from the API.\r\n   * @param {SharefileHTTP} http - The HTTP client for making requests.\r\n   * @param {ShareFileAPI} api - The ShareFile API instance.\r\n   */\r\n  constructor(data: ISearchResult_Reponse, http: SharefileHTTP, api: ShareFileAPI) {\r\n    super(http,api)\r\n    this.partialResults = data.PartialResults;\r\n    this.timedOut = data.TimedOut;\r\n    this.totalCount = data.TotalCount;\r\n\r\n    // Convert raw results to SearchResultItems\r\n    this.results = data.Results\r\n  }\r\n\r\n  /**\r\n   * Gets a specific page of search results.\r\n   * \r\n   * @param {number} pageNumber - The page number to retrieve.\r\n   * @param {number} pageSize - The number of items per page.\r\n   * @returns {Promise<SharefileSearchResults>} A new instance of SharefileSearchResults with the requested page of results.\r\n   */\r\n  async getPage(pageNumber: number, pageSize: number): Promise<SharefileSearchResults> {\r\n    const skip = (pageNumber - 1) * pageSize;\r\n    const response:ISearchResult_Reponse = await this._http.get('Items/Search', {\r\n      $top: pageSize,\r\n      $skip: skip,\r\n    });\r\n    return new SharefileSearchResults(response, this._http, this._api);\r\n  }\r\n\r\n  /**\r\n   * Retrieves the full SharefileItem for each search result.\r\n   * \r\n   * @returns {Promise<SharefileItem[]>} An array of full SharefileItem objects.\r\n   */\r\n  async getFullItems(): Promise<SharefileItem[]> {\r\n    const itemPromises = this.results.map(result => this._api.getItem(result.Item.id));\r\n    return Promise.all(itemPromises);\r\n  }\r\n}\r\n\r\nexport default SharefileSearchResults;","import SharefileItem from './models/item';\r\nimport SharefileHTTP, { SharefileApiAuth } from './http/index';\r\nimport { ShareFileAPIModels } from './types/sharefile.api.models';\r\nimport SharefileSearchResults, { ISearchResult_Reponse } from './models/search-results';\r\nimport SharefileClientAPIElement from './models/api-element';\r\n/**\r\n * ShareFileAPI class provides a high-level interface for interacting with the ShareFile API.\r\n * It handles authentication, item management, and other core ShareFile operations.\r\n * \r\n * @example\r\n * const api = new ShareFileAPI({\r\n *   subdomain: 'mycompany',\r\n *   username: 'user@example.com',\r\n *   password: 'password123',\r\n *   clientId: 'your-client-id',\r\n *   clientSecret: 'your-client-secret'\r\n * });\r\n * \r\n * await api.connect();\r\n * const rootFolder = await api.getItem('home');\r\n */\r\nexport default class ShareFileAPI {\r\n  _http: SharefileHTTP;\r\n  _api:ShareFileAPI\r\n\r\n  /**\r\n   * Creates a new instance of ShareFileAPI.\r\n   * \r\n   * @param {SharefileApiAuth} auth - Authentication details for ShareFile\r\n   */\r\n  constructor(auth: SharefileApiAuth) {\r\n    this._api = this\r\n    this._http = new SharefileHTTP(auth);\r\n  }\r\n\r\n  /**\r\n   * Authenticates with the ShareFile API.\r\n   * This method should be called before making any other API requests.\r\n   * \r\n   * @returns {Promise<string>} A promise that resolves to the access token\r\n   * @throws {Error} If authentication fails\r\n   * \r\n   * @example\r\n   * await api.connect();\r\n   */\r\n  async connect(): Promise<string> {\r\n    return this._http.authenticate();\r\n  }\r\n\r\n  /**\r\n   * Retrieves a ShareFile item by its ID or path.\r\n   * \r\n   * @param {string} idOrPath - The ID or path of the item to retrieve\r\n   * @returns {Promise<SharefileItem>} A promise that resolves to the requested item\r\n   * @throws {Error} If the item retrieval fails\r\n   * \r\n   * @example\r\n   * const homeFolder = await api.getItem('home');\r\n   * const specificFile = await api.getItem('fi123456789');\r\n   * const folderByPath = await api.getItem('/Personal Folders/Documents');\r\n   */\r\n  async getItem(idOrPath: string|ShareFileAPIModels.SpecialItemIDs): Promise<SharefileItem> {\r\n    try {\r\n      const isPath = idOrPath.includes('/');\r\n      const endpoint = isPath ? 'Items/ByPath' : `Items(${idOrPath})`;\r\n      const params = isPath ? { path: idOrPath } : undefined;\r\n      const data = await this._http.get<ShareFileAPIModels.Item>(endpoint, params);\r\n      return new SharefileItem(data, this._http, this);\r\n    } catch (error: any) {\r\n      throw new Error(`Failed to retrieve item ${idOrPath}: ${error?.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Retrieves the contents of a folder.\r\n   * \r\n   * @param {string} folderId - The ID of the folder\r\n   * @param {Record<string, any>} [queryParams] - Additional query parameters\r\n   * @returns {Promise<SharefileItem[]>} A promise that resolves to an array of folder contents\r\n   * @throws {Error} If retrieval of folder contents fails\r\n   * \r\n   * @example\r\n   * const folderContents = await api.getFolderContents('fo123456789');\r\n   * const filteredContents = await api.getFolderContents('fo123456789', { $filter: 'IsFolder eq true' });\r\n   */\r\n  async getFolderContents(folderId: string, queryParams: Record<string, any> = {}): Promise<SharefileItem[]> {\r\n    try {\r\n      const data = await this._http.get<{ value: ShareFileAPIModels.Item[] }>(`Items(${folderId})/Children`, queryParams);\r\n      return data.value.map(item => new SharefileItem(item, this._http, this));\r\n    } catch (error: any) {\r\n      throw new Error(`Failed to retrieve folder contents: ${error?.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates a new item in ShareFile.\r\n   * \r\n   * @param {string} parentId - The ID of the parent folder\r\n   * @param {string} itemType - The type of item to create (e.g., 'Folder', 'File')\r\n   * @param {Record<string, any>} itemData - Data for the new item\r\n   * @returns {Promise<SharefileItem>} A promise that resolves to the created item\r\n   * @throws {Error} If item creation fails\r\n   * \r\n   * @example\r\n   * const newFolder = await api.createItem('fo123456789', 'Folder', { Name: 'New Folder' });\r\n   * const newFile = await api.createItem('fo123456789', 'File', { Name: 'test.txt', ContentType: 'text/plain' });\r\n   */\r\n  async createItem(parentId: string, itemType: string, itemData: Record<string, any>): Promise<SharefileItem> {\r\n    try {\r\n      const data = await this._http.post<ShareFileAPIModels.Item>(`Items(${parentId})/${itemType}`, itemData);\r\n      return new SharefileItem(data, this._http, this);\r\n    } catch (error: any) {\r\n      throw new Error(`Failed to create item: ${error?.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Deletes an item from ShareFile.\r\n   * \r\n   * @param {string} itemId - The ID of the item to delete\r\n   * @returns {Promise<void>}\r\n   * @throws {Error} If item deletion fails\r\n   * \r\n   * @example\r\n   * await api.deleteItem('fi123456789');\r\n   */\r\n  async deleteItem(itemId: string): Promise<void> {\r\n    try {\r\n      await this._http.delete(`Items(${itemId})`);\r\n    } catch (error: any) {\r\n      throw new Error(`Failed to delete item: ${error?.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Searches for items in ShareFile.\r\n   * \r\n   * @param {string} query - The search query\r\n   * @param {Record<string, any>} [searchParams] - Additional search parameters\r\n   * @returns {Promise<SharefileSearchResults>} A promise that resolves to an array of search results\r\n   * @throws {Error} If the search operation fails\r\n   * \r\n   * @example\r\n   * const searchResults = await api.searchItems('budget');\r\n   * const filteredSearch = await api.searchItems('report', { $filter: 'CreationDate gt 2023-01-01' });\r\n   */\r\n  async searchItems(query: string, searchParams: Record<string, any> = {}): Promise<SharefileSearchResults> {\r\n    try {\r\n      const data = await this._http.get<ISearchResult_Reponse>('Items/Search', { ...searchParams, query });\r\n\r\n      return new SharefileSearchResults(data,this._http,this._api)\r\n    } catch (error: any) {\r\n      throw new Error(`Search failed: ${error?.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the underlying HTTP client for advanced usage.\r\n   * \r\n   * @returns {SharefileHTTP} The HTTP client instance\r\n   * \r\n   * @example\r\n   * const httpClient = api.getHttpClient();\r\n   * const customData = await httpClient.get('CustomEndpoint');\r\n   */\r\n  getHttpClient(): SharefileHTTP {\r\n    return this._http;\r\n  }\r\n\r\n  // Deprecated methods\r\n\r\n  /**\r\n   * @deprecated Use getItem() instead.\r\n   * This method will be removed in a future version.\r\n   */\r\n  @Deprecated('Use getItem() instead')\r\n  async items(id?: string, queryParams: Record<string, any> = {}): Promise<SharefileItem> {\r\n    console.warn('Deprecated: The items() method is deprecated. Use getItem() instead.');\r\n    return this.getItem(id || '');\r\n  }\r\n\r\n  /**\r\n   * @deprecated Use getItem() instead.\r\n   * This method will be removed in a future version.\r\n   */\r\n  @Deprecated('Use getItem() instead')\r\n  async itemsByPath(path: string): Promise<SharefileItem> {\r\n    console.warn('Deprecated: The itemsByPath() method is deprecated. Use getItem() instead.');\r\n    return this.getItem(path);\r\n  }\r\n\r\n  /**\r\n   * @deprecated Use createItem() instead.\r\n   * This method will be removed in a future version.\r\n   */\r\n  @Deprecated('Use createItem() instead')\r\n  async createFolder(parentId: string, folderName: string): Promise<SharefileItem> {\r\n    console.warn('Deprecated: The createFolder() method is deprecated. Use createItem() instead.');\r\n    return this.createItem(parentId, 'Folder', { Name: folderName });\r\n  }\r\n}\r\n\r\n/**\r\n * TypeScript decorator for deprecation\r\n * Note: You may need to enable experimentalDecorators in tsconfig.json\r\n * \r\n * @param {string} message - The deprecation message\r\n */\r\nfunction Deprecated(message: string) {\r\n  return (target: any, propertyKey: string, descriptor: PropertyDescriptor) => {\r\n    if (descriptor) {\r\n      const original = descriptor.value;\r\n      descriptor.value = function(...args: any[]) {\r\n        console.warn(`Deprecated: ${propertyKey} is deprecated. ${message}`);\r\n        return original.apply(this, args);\r\n      };\r\n    } else {\r\n      console.warn(`Deprecated: ${propertyKey} is deprecated. ${message}`);\r\n    }\r\n  };\r\n}"],"mappings":"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","names":["detectContentType","idOrPath"]}